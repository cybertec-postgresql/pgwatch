<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>reaper - GoPages</title>

<link type="text/css" rel="stylesheet" href="/docs/godoc/lib/godoc/style.css">

<script>window.initFuncs = [];</script>
<script src="/docs/godoc/lib/godoc/jquery.js" defer></script>




<script>var goVersion = "go1.22.0";</script>
<script src="/docs/godoc/lib/godoc/godocs.js" defer></script>

</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/">GoPages | Auto-generated docs</a></div>
<div class="top-heading" id="heading-narrow"><a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/">GoPages</a></div>
<a href="#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Package reaper
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<div id="short-nav">
			<dl>
			<dd><code>import "github.com/cybertec-postgresql/pgwatch3/reaper"</code></dd>
			</dl>
			<dl>
			<dd><a href="#pkg-overview" class="overviewLink">Overview</a></dd>
			<dd><a href="#pkg-index" class="indexLink">Index</a></dd>
			
			
			</dl>
		</div>
		<!-- The package's Name is printed as title by the top-level template -->
		<div id="pkg-overview" class="toggleVisible">
			<div class="collapsed">
				<h2 class="toggleButton" title="Click to show Overview section">Overview ▹</h2>
			</div>
			<div class="expanded">
				<h2 class="toggleButton" title="Click to hide Overview section">Overview ▾</h2>
				
				
			</div>
		</div>

		<div id="pkg-index" class="toggleVisible">
		<div class="collapsed">
			<h2 class="toggleButton" title="Click to show Index section">Index ▹</h2>
		</div>
		<div class="expanded">
			<h2 class="toggleButton" title="Click to hide Index section">Index ▾</h2>

		<!-- Table of contents for API; must be named manual-nav to turn off auto nav. -->
			<div id="manual-nav">
			<dl>
			
				<dd><a href="#pkg-constants">Constants</a></dd>
			
			
			
				
				<dd><a href="#AddDbnameSysinfoIfNotExistsToQueryResultData">func AddDbnameSysinfoIfNotExistsToQueryResultData(data metrics.Measurements, ver DBVersionMapEntry, opts *config.Options) metrics.Measurements</a></dd>
			
				
				<dd><a href="#CheckForPGObjectChangesAndStore">func CheckForPGObjectChangesAndStore(ctx context.Context, dbUnique string, vme DBVersionMapEntry, storageCh chan&lt;- []metrics.MeasurementMessage, hostState map[string]map[string]string)</a></dd>
			
				
				<dd><a href="#ClearDBUnreachableStateIfAny">func ClearDBUnreachableStateIfAny(dbUnique string)</a></dd>
			
				
				<dd><a href="#CloseResourcesForRemovedMonitoredDBs">func CloseResourcesForRemovedMonitoredDBs(metricsWriter *sinks.MultiWriter, currentDBs, prevLoopDBs sources.MonitoredDatabases, shutDownDueToRoleChange map[string]bool)</a></dd>
			
				
				<dd><a href="#DBExecRead">func DBExecRead(ctx context.Context, conn db.PgxIface, sql string, args ...any) (metrics.Measurements, error)</a></dd>
			
				
				<dd><a href="#DBExecReadByDbUniqueName">func DBExecReadByDbUniqueName(ctx context.Context, dbUnique string, sql string, args ...any) (metrics.Measurements, error)</a></dd>
			
				
				<dd><a href="#DBGetSizeMB">func DBGetSizeMB(ctx context.Context, dbUnique string) (int64, error)</a></dd>
			
				
				<dd><a href="#DatarowsToMetricstoreMessage">func DatarowsToMetricstoreMessage(data metrics.Measurements, msg MetricFetchMessage, vme DBVersionMapEntry, mvp metrics.Metric) (metrics.MeasurementMessage, error)</a></dd>
			
				
				<dd><a href="#DoesEmergencyTriggerfileExist">func DoesEmergencyTriggerfileExist(fname string) bool</a></dd>
			
				
				<dd><a href="#DoesFunctionExists">func DoesFunctionExists(ctx context.Context, dbUnique, functionName string) bool</a></dd>
			
				
				<dd><a href="#FetchMetrics">func FetchMetrics(ctx context.Context, msg MetricFetchMessage, hostState map[string]map[string]string, storageCh chan&lt;- []metrics.MeasurementMessage, context string, opts *config.Options) ([]metrics.MeasurementMessage, error)</a></dd>
			
				
				<dd><a href="#FetchMetricsPgpool">func FetchMetricsPgpool(ctx context.Context, msg MetricFetchMessage, vme DBVersionMapEntry, mvp metrics.Metric) (metrics.Measurements, error)</a></dd>
			
				
				<dd><a href="#FetchStatsDirectlyFromOS">func FetchStatsDirectlyFromOS(ctx context.Context, msg MetricFetchMessage, vme DBVersionMapEntry, mvp metrics.Metric) ([]metrics.MeasurementMessage, error)</a></dd>
			
				
				<dd><a href="#FilterPgbouncerData">func FilterPgbouncerData(ctx context.Context, data metrics.Measurements, databaseToKeep string, vme DBVersionMapEntry) metrics.Measurements</a></dd>
			
				
				<dd><a href="#GetAllRecoMetricsForVersion">func GetAllRecoMetricsForVersion(vme DBVersionMapEntry) (map[string]metrics.Metric, error)</a></dd>
			
				
				<dd><a href="#GetConnByUniqueName">func GetConnByUniqueName(dbUnique string) db.PgxIface</a></dd>
			
				
				<dd><a href="#GetDBTotalApproxSize">func GetDBTotalApproxSize(ctx context.Context, dbUnique string) (int64, error)</a></dd>
			
				
				<dd><a href="#GetFromInstanceCacheIfNotOlderThanSeconds">func GetFromInstanceCacheIfNotOlderThanSeconds(msg MetricFetchMessage, maxAgeSeconds int64) metrics.Measurements</a></dd>
			
				
				<dd><a href="#GetGoPsutilDiskPG">func GetGoPsutilDiskPG(ctx context.Context, dbUnique string) (metrics.Measurements, error)</a></dd>
			
				
				<dd><a href="#GetMetricVersionProperties">func GetMetricVersionProperties(metric string, _ DBVersionMapEntry, metricDefMap *metrics.Metrics) (metrics.Metric, error)</a></dd>
			
				
				<dd><a href="#GetMonitoredDatabaseByUniqueName">func GetMonitoredDatabaseByUniqueName(name string) (*sources.MonitoredDatabase, error)</a></dd>
			
				
				<dd><a href="#GetRecommendations">func GetRecommendations(ctx context.Context, dbUnique string, vme DBVersionMapEntry) (metrics.Measurements, error)</a></dd>
			
				
				<dd><a href="#InitPGVersionInfoFetchingLockIfNil">func InitPGVersionInfoFetchingLockIfNil(md *sources.MonitoredDatabase)</a></dd>
			
				
				<dd><a href="#InitSQLConnPoolForMonitoredDBIfNil">func InitSQLConnPoolForMonitoredDBIfNil(ctx context.Context, md *sources.MonitoredDatabase, maxConns int) (err error)</a></dd>
			
				
				<dd><a href="#IsCacheableMetric">func IsCacheableMetric(msg MetricFetchMessage, mvp metrics.Metric) bool</a></dd>
			
				
				<dd><a href="#IsDBDormant">func IsDBDormant(dbUnique string) bool</a></dd>
			
				
				<dd><a href="#IsDBIgnoredBasedOnRecoveryState">func IsDBIgnoredBasedOnRecoveryState(dbUnique string) bool</a></dd>
			
				
				<dd><a href="#IsDBUndersized">func IsDBUndersized(dbUnique string) bool</a></dd>
			
				
				<dd><a href="#IsDirectlyFetchableMetric">func IsDirectlyFetchableMetric(metric string) bool</a></dd>
			
				
				<dd><a href="#LoadMetricDefs">func LoadMetricDefs(r metrics.Reader) (err error)</a></dd>
			
				
				<dd><a href="#PutToInstanceCache">func PutToInstanceCache(msg MetricFetchMessage, data metrics.Measurements)</a></dd>
			
				
				<dd><a href="#SetDBUnreachableState">func SetDBUnreachableState(dbUnique string)</a></dd>
			
				
				<dd><a href="#SetRecoveryIgnoredDBState">func SetRecoveryIgnoredDBState(dbUnique string, state bool)</a></dd>
			
				
				<dd><a href="#SetUndersizedDBState">func SetUndersizedDBState(dbUnique string, state bool)</a></dd>
			
				
				<dd><a href="#StoreMetrics">func StoreMetrics(metrics []metrics.MeasurementMessage, storageCh chan&lt;- []metrics.MeasurementMessage) (int, error)</a></dd>
			
				
				<dd><a href="#SyncMetricDefs">func SyncMetricDefs(ctx context.Context, r metrics.Reader)</a></dd>
			
				
				<dd><a href="#SyncMonitoredDBsToDatastore">func SyncMonitoredDBsToDatastore(ctx context.Context, monitoredDbs []*sources.MonitoredDatabase, persistenceChannel chan []metrics.MeasurementMessage)</a></dd>
			
				
				<dd><a href="#TryCreateMetricsFetchingHelpers">func TryCreateMetricsFetchingHelpers(ctx context.Context, md *sources.MonitoredDatabase) (err error)</a></dd>
			
				
				<dd><a href="#TryCreateMissingExtensions">func TryCreateMissingExtensions(ctx context.Context, dbUnique string, extensionNames []string, existingExtensions map[string]int) []string</a></dd>
			
				
				<dd><a href="#TryDiscoverExecutionEnv">func TryDiscoverExecutionEnv(ctx context.Context, dbUnique string) string</a></dd>
			
				
				<dd><a href="#UpdateMonitoredDBCache">func UpdateMonitoredDBCache(data sources.MonitoredDatabases)</a></dd>
			
				
				<dd><a href="#VersionToInt">func VersionToInt(version string) (v int)</a></dd>
			
			
				
				<dd><a href="#ChangeDetectionResults">type ChangeDetectionResults</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#DetectConfigurationChanges">func DetectConfigurationChanges(ctx context.Context, dbUnique string, vme DBVersionMapEntry, storageCh chan&lt;- []metrics.MeasurementMessage, hostState map[string]map[string]string) ChangeDetectionResults</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#DetectIndexChanges">func DetectIndexChanges(ctx context.Context, dbUnique string, vme DBVersionMapEntry, storageCh chan&lt;- []metrics.MeasurementMessage, hostState map[string]map[string]string) ChangeDetectionResults</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#DetectPrivilegeChanges">func DetectPrivilegeChanges(ctx context.Context, dbUnique string, vme DBVersionMapEntry, storageCh chan&lt;- []metrics.MeasurementMessage, hostState map[string]map[string]string) ChangeDetectionResults</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#DetectSprocChanges">func DetectSprocChanges(ctx context.Context, dbUnique string, vme DBVersionMapEntry, storageCh chan&lt;- []metrics.MeasurementMessage, hostState map[string]map[string]string) ChangeDetectionResults</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#DetectTableChanges">func DetectTableChanges(ctx context.Context, dbUnique string, vme DBVersionMapEntry, storageCh chan&lt;- []metrics.MeasurementMessage, hostState map[string]map[string]string) ChangeDetectionResults</a></dd>
				
				
			
				
				<dd><a href="#DBVersionMapEntry">type DBVersionMapEntry</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#DBGetPGVersion">func DBGetPGVersion(ctx context.Context, dbUnique string, srcType sources.Kind, noCache bool, SysID string) (DBVersionMapEntry, error)</a></dd>
				
				
			
				
				<dd><a href="#ExistingPartitionInfo">type ExistingPartitionInfo</a></dd>
				
				
			
				
				<dd><a href="#MetricFetchMessage">type MetricFetchMessage</a></dd>
				
				
			
				
				<dd><a href="#Reaper">type Reaper</a></dd>
				
					
					<dd>&nbsp; &nbsp; <a href="#NewReaper">func NewReaper(opts *config.Options, sourcesReaderWriter sources.ReaderWriter, metricsReaderWriter metrics.ReaderWriter) *Reaper</a></dd>
				
				
					
					<dd>&nbsp; &nbsp; <a href="#Reaper.Reap">func (r *Reaper) Reap(mainContext context.Context) (err error)</a></dd>
				
			
			
			</dl>
			</div><!-- #manual-nav -->

		

		
			<h3>Package files</h3>
			<p>
			<span style="font-size:90%">
			
				<a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html">cache.go</a>
			
				<a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html">database.go</a>
			
				<a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/file.go.html">file.go</a>
			
				<a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html">reaper.go</a>
			
				<a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/recommendations.go.html">recommendations.go</a>
			
				<a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/types.go.html">types.go</a>
			
			</span>
			</p>
		
		</div><!-- .expanded -->
		</div><!-- #pkg-index -->

		

		
			<h2 id="pkg-constants">Constants</h2>
			
				
				<pre>const <span id="MinExtensionInfoAvailable">MinExtensionInfoAvailable</span> = 9_01_00</pre>
			
		
		
		
			
			
			<h2 id="AddDbnameSysinfoIfNotExistsToQueryResultData">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L540">AddDbnameSysinfoIfNotExistsToQueryResultData</a>
				<a class="permalink" href="#AddDbnameSysinfoIfNotExistsToQueryResultData">&#xb6;</a>
				
				
			</h2>
			<pre>func AddDbnameSysinfoIfNotExistsToQueryResultData(data <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, ver <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, opts *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/config/">config</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/config/#Options">Options</a>) <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a></pre>
			
			
			

		
			
			
			<h2 id="CheckForPGObjectChangesAndStore">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L730">CheckForPGObjectChangesAndStore</a>
				<a class="permalink" href="#CheckForPGObjectChangesAndStore">&#xb6;</a>
				
				
			</h2>
			<pre>func CheckForPGObjectChangesAndStore(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>)</pre>
			
			
			

		
			
			
			<h2 id="ClearDBUnreachableStateIfAny">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L1004">ClearDBUnreachableStateIfAny</a>
				<a class="permalink" href="#ClearDBUnreachableStateIfAny">&#xb6;</a>
				
				
			</h2>
			<pre>func ClearDBUnreachableStateIfAny(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>)</pre>
			
			
			

		
			
			
			<h2 id="CloseResourcesForRemovedMonitoredDBs">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L975">CloseResourcesForRemovedMonitoredDBs</a>
				<a class="permalink" href="#CloseResourcesForRemovedMonitoredDBs">&#xb6;</a>
				
				
			</h2>
			<pre>func CloseResourcesForRemovedMonitoredDBs(metricsWriter *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sinks/">sinks</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sinks/#MultiWriter">MultiWriter</a>, currentDBs, prevLoopDBs <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabases">MonitoredDatabases</a>, shutDownDueToRoleChange map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#bool">bool</a>)</pre>
			
			
			

		
			
			
			<h2 id="DBExecRead">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L42">DBExecRead</a>
				<a class="permalink" href="#DBExecRead">&#xb6;</a>
				
				
			</h2>
			<pre>func DBExecRead(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, conn <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/db/">db</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/db/#PgxIface">PgxIface</a>, sql <a href="https://pkg.go.dev/builtin/#string">string</a>, args ...<a href="https://pkg.go.dev/builtin/#any">any</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="DBExecReadByDbUniqueName">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L57">DBExecReadByDbUniqueName</a>
				<a class="permalink" href="#DBExecReadByDbUniqueName">&#xb6;</a>
				
				
			</h2>
			<pre>func DBExecReadByDbUniqueName(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, sql <a href="https://pkg.go.dev/builtin/#string">string</a>, args ...<a href="https://pkg.go.dev/builtin/#any">any</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="DBGetSizeMB">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L92">DBGetSizeMB</a>
				<a class="permalink" href="#DBGetSizeMB">&#xb6;</a>
				
				
			</h2>
			<pre>func DBGetSizeMB(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) (<a href="https://pkg.go.dev/builtin/#int64">int64</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="DatarowsToMetricstoreMessage">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/file.go.html#L65">DatarowsToMetricstoreMessage</a>
				<a class="permalink" href="#DatarowsToMetricstoreMessage">&#xb6;</a>
				
				
			</h2>
			<pre>func DatarowsToMetricstoreMessage(data <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, msg <a href="#MetricFetchMessage">MetricFetchMessage</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, mvp <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metric">Metric</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>data + custom tags + counters

			
			

		
			
			
			<h2 id="DoesEmergencyTriggerfileExist">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/file.go.html#L11">DoesEmergencyTriggerfileExist</a>
				<a class="permalink" href="#DoesEmergencyTriggerfileExist">&#xb6;</a>
				
				
			</h2>
			<pre>func DoesEmergencyTriggerfileExist(fname <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="DoesFunctionExists">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L867">DoesFunctionExists</a>
				<a class="permalink" href="#DoesFunctionExists">&#xb6;</a>
				
				
			</h2>
			<pre>func DoesFunctionExists(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique, functionName <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="FetchMetrics">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L601">FetchMetrics</a>
				<a class="permalink" href="#FetchMetrics">&#xb6;</a>
				
				
			</h2>
			<pre>func FetchMetrics(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>,
    msg <a href="#MetricFetchMessage">MetricFetchMessage</a>,
    hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>,
    storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>,
    context <a href="https://pkg.go.dev/builtin/#string">string</a>,
    opts *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/config/">config</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/config/#Options">Options</a>) ([]<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="FetchMetricsPgpool">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L775">FetchMetricsPgpool</a>
				<a class="permalink" href="#FetchMetricsPgpool">&#xb6;</a>
				
				
			</h2>
			<pre>func FetchMetricsPgpool(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, msg <a href="#MetricFetchMessage">MetricFetchMessage</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, mvp <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metric">Metric</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>some extra work needed as pgpool SHOW commands don&apos;t specify the return data types for some reason

			
			

		
			
			
			<h2 id="FetchStatsDirectlyFromOS">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/file.go.html#L38">FetchStatsDirectlyFromOS</a>
				<a class="permalink" href="#FetchStatsDirectlyFromOS">&#xb6;</a>
				
				
			</h2>
			<pre>func FetchStatsDirectlyFromOS(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, msg <a href="#MetricFetchMessage">MetricFetchMessage</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, mvp <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metric">Metric</a>) ([]<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="FilterPgbouncerData">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L757">FilterPgbouncerData</a>
				<a class="permalink" href="#FilterPgbouncerData">&#xb6;</a>
				
				
			</h2>
			<pre>func FilterPgbouncerData(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, data <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, databaseToKeep <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>) <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a></pre>
			
			
			

		
			
			
			<h2 id="GetAllRecoMetricsForVersion">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/recommendations.go.html#L30">GetAllRecoMetricsForVersion</a>
				<a class="permalink" href="#GetAllRecoMetricsForVersion">&#xb6;</a>
				
				
			</h2>
			<pre>func GetAllRecoMetricsForVersion(vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>) (map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metric">Metric</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="GetConnByUniqueName">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L50">GetConnByUniqueName</a>
				<a class="permalink" href="#GetConnByUniqueName">&#xb6;</a>
				
				
			</h2>
			<pre>func GetConnByUniqueName(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/db/">db</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/db/#PgxIface">PgxIface</a></pre>
			
			
			

		
			
			
			<h2 id="GetDBTotalApproxSize">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L148">GetDBTotalApproxSize</a>
				<a class="permalink" href="#GetDBTotalApproxSize">&#xb6;</a>
				
				
			</h2>
			<pre>func GetDBTotalApproxSize(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) (<a href="https://pkg.go.dev/builtin/#int64">int64</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="GetFromInstanceCacheIfNotOlderThanSeconds">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L109">GetFromInstanceCacheIfNotOlderThanSeconds</a>
				<a class="permalink" href="#GetFromInstanceCacheIfNotOlderThanSeconds">&#xb6;</a>
				
				
			</h2>
			<pre>func GetFromInstanceCacheIfNotOlderThanSeconds(msg <a href="#MetricFetchMessage">MetricFetchMessage</a>, maxAgeSeconds <a href="https://pkg.go.dev/builtin/#int64">int64</a>) <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a></pre>
			
			
			

		
			
			
			<h2 id="GetGoPsutilDiskPG">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L960">GetGoPsutilDiskPG</a>
				<a class="permalink" href="#GetGoPsutilDiskPG">&#xb6;</a>
				
				
			</h2>
			<pre>func GetGoPsutilDiskPG(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>connects actually to the instance to determine PG relevant disk paths / mounts

			
			

		
			
			
			<h2 id="GetMetricVersionProperties">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L67">GetMetricVersionProperties</a>
				<a class="permalink" href="#GetMetricVersionProperties">&#xb6;</a>
				
				
			</h2>
			<pre>func GetMetricVersionProperties(metric <a href="https://pkg.go.dev/builtin/#string">string</a>, _ <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, metricDefMap *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metrics">Metrics</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metric">Metric</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>assumes upwards compatibility for versions

			
			

		
			
			
			<h2 id="GetMonitoredDatabaseByUniqueName">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L56">GetMonitoredDatabaseByUniqueName</a>
				<a class="permalink" href="#GetMonitoredDatabaseByUniqueName">&#xb6;</a>
				
				
			</h2>
			<pre>func GetMonitoredDatabaseByUniqueName(name <a href="https://pkg.go.dev/builtin/#string">string</a>) (*<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabase">MonitoredDatabase</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="GetRecommendations">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/recommendations.go.html#L46">GetRecommendations</a>
				<a class="permalink" href="#GetRecommendations">&#xb6;</a>
				
				
			</h2>
			<pre>func GetRecommendations(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>) (<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="InitPGVersionInfoFetchingLockIfNil">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L38">InitPGVersionInfoFetchingLockIfNil</a>
				<a class="permalink" href="#InitPGVersionInfoFetchingLockIfNil">&#xb6;</a>
				
				
			</h2>
			<pre>func InitPGVersionInfoFetchingLockIfNil(md *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabase">MonitoredDatabase</a>)</pre>
			
			
			

		
			
			
			<h2 id="InitSQLConnPoolForMonitoredDBIfNil">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L25">InitSQLConnPoolForMonitoredDBIfNil</a>
				<a class="permalink" href="#InitSQLConnPoolForMonitoredDBIfNil">&#xb6;</a>
				
				
			</h2>
			<pre>func InitSQLConnPoolForMonitoredDBIfNil(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, md *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabase">MonitoredDatabase</a>, maxConns <a href="https://pkg.go.dev/builtin/#int">int</a>) (err <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>every DB under monitoring should have exactly 1 sql.DB connection assigned, that will internally limit parallel access

			
			

		
			
			
			<h2 id="IsCacheableMetric">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L566">IsCacheableMetric</a>
				<a class="permalink" href="#IsCacheableMetric">&#xb6;</a>
				
				
			</h2>
			<pre>func IsCacheableMetric(msg <a href="#MetricFetchMessage">MetricFetchMessage</a>, mvp <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Metric">Metric</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="IsDBDormant">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L1042">IsDBDormant</a>
				<a class="permalink" href="#IsDBDormant">&#xb6;</a>
				
				
			</h2>
			<pre>func IsDBDormant(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="IsDBIgnoredBasedOnRecoveryState">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L1032">IsDBIgnoredBasedOnRecoveryState</a>
				<a class="permalink" href="#IsDBIgnoredBasedOnRecoveryState">&#xb6;</a>
				
				
			</h2>
			<pre>func IsDBIgnoredBasedOnRecoveryState(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="IsDBUndersized">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L1016">IsDBUndersized</a>
				<a class="permalink" href="#IsDBUndersized">&#xb6;</a>
				
				
			</h2>
			<pre>func IsDBUndersized(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="IsDirectlyFetchableMetric">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/file.go.html#L33">IsDirectlyFetchableMetric</a>
				<a class="permalink" href="#IsDirectlyFetchableMetric">&#xb6;</a>
				
				
			</h2>
			<pre>func IsDirectlyFetchableMetric(metric <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#bool">bool</a></pre>
			
			
			

		
			
			
			<h2 id="LoadMetricDefs">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L81">LoadMetricDefs</a>
				<a class="permalink" href="#LoadMetricDefs">&#xb6;</a>
				
				
			</h2>
			<pre>func LoadMetricDefs(r <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Reader">Reader</a>) (err <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>LoadMetricDefs loads metric definitions from the reader

			
			

		
			
			
			<h2 id="PutToInstanceCache">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L573">PutToInstanceCache</a>
				<a class="permalink" href="#PutToInstanceCache">&#xb6;</a>
				
				
			</h2>
			<pre>func PutToInstanceCache(msg <a href="#MetricFetchMessage">MetricFetchMessage</a>, data <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Measurements">Measurements</a>)</pre>
			
			
			

		
			
			
			<h2 id="SetDBUnreachableState">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L998">SetDBUnreachableState</a>
				<a class="permalink" href="#SetDBUnreachableState">&#xb6;</a>
				
				
			</h2>
			<pre>func SetDBUnreachableState(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>)</pre>
			
			
			

		
			
			
			<h2 id="SetRecoveryIgnoredDBState">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L1026">SetRecoveryIgnoredDBState</a>
				<a class="permalink" href="#SetRecoveryIgnoredDBState">&#xb6;</a>
				
				
			</h2>
			<pre>func SetRecoveryIgnoredDBState(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, state <a href="https://pkg.go.dev/builtin/#bool">bool</a>)</pre>
			
			
			

		
			
			
			<h2 id="SetUndersizedDBState">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L1010">SetUndersizedDBState</a>
				<a class="permalink" href="#SetUndersizedDBState">&#xb6;</a>
				
				
			</h2>
			<pre>func SetUndersizedDBState(dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, state <a href="https://pkg.go.dev/builtin/#bool">bool</a>)</pre>
			
			
			

		
			
			
			<h2 id="StoreMetrics">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L502">StoreMetrics</a>
				<a class="permalink" href="#StoreMetrics">&#xb6;</a>
				
				
			</h2>
			<pre>func StoreMetrics(metrics []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>) (<a href="https://pkg.go.dev/builtin/#int">int</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			
			
			

		
			
			
			<h2 id="SyncMetricDefs">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L96">SyncMetricDefs</a>
				<a class="permalink" href="#SyncMetricDefs">&#xb6;</a>
				
				
			</h2>
			<pre>func SyncMetricDefs(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, r <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#Reader">Reader</a>)</pre>
			<p>SyncMetricDefs refreshes metric definitions at regular intervals

			
			

		
			
			
			<h2 id="SyncMonitoredDBsToDatastore">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L510">SyncMonitoredDBsToDatastore</a>
				<a class="permalink" href="#SyncMonitoredDBsToDatastore">&#xb6;</a>
				
				
			</h2>
			<pre>func SyncMonitoredDBsToDatastore(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, monitoredDbs []*<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabase">MonitoredDatabase</a>, persistenceChannel chan []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>)</pre>
			
			
			

		
			
			
			<h2 id="TryCreateMetricsFetchingHelpers">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L922">TryCreateMetricsFetchingHelpers</a>
				<a class="permalink" href="#TryCreateMetricsFetchingHelpers">&#xb6;</a>
				
				
			</h2>
			<pre>func TryCreateMetricsFetchingHelpers(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, md *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabase">MonitoredDatabase</a>) (err <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
			<p>Called once on daemon startup to try to create &quot;metric fething helper&quot; functions automatically

			
			

		
			
			
			<h2 id="TryCreateMissingExtensions">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L885">TryCreateMissingExtensions</a>
				<a class="permalink" href="#TryCreateMissingExtensions">&#xb6;</a>
				
				
			</h2>
			<pre>func TryCreateMissingExtensions(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, extensionNames []<a href="https://pkg.go.dev/builtin/#string">string</a>, existingExtensions map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#int">int</a>) []<a href="https://pkg.go.dev/builtin/#string">string</a></pre>
			<p>Called once on daemon startup if some commonly wanted extension (most notably pg_stat_statements) is missing.
With newer Postgres version can even succeed if the user is not a real superuser due to some cloud-specific
whitelisting or &quot;trusted extensions&quot; (a feature from v13). Ignores errors.

			
			

		
			
			
			<h2 id="TryDiscoverExecutionEnv">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L131">TryDiscoverExecutionEnv</a>
				<a class="permalink" href="#TryDiscoverExecutionEnv">&#xb6;</a>
				
				
			</h2>
			<pre>func TryDiscoverExecutionEnv(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="https://pkg.go.dev/builtin/#string">string</a></pre>
			
			
			

		
			
			
			<h2 id="UpdateMonitoredDBCache">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/cache.go.html#L46">UpdateMonitoredDBCache</a>
				<a class="permalink" href="#UpdateMonitoredDBCache">&#xb6;</a>
				
				
			</h2>
			<pre>func UpdateMonitoredDBCache(data <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#MonitoredDatabases">MonitoredDatabases</a>)</pre>
			
			
			

		
			
			
			<h2 id="VersionToInt">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L170">VersionToInt</a>
				<a class="permalink" href="#VersionToInt">&#xb6;</a>
				
				
			</h2>
			<pre>func VersionToInt(version <a href="https://pkg.go.dev/builtin/#string">string</a>) (v <a href="https://pkg.go.dev/builtin/#int">int</a>)</pre>
			
			
			

		
		
			
			
			<h2 id="ChangeDetectionResults">type <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/types.go.html#L38">ChangeDetectionResults</a>
				<a class="permalink" href="#ChangeDetectionResults">&#xb6;</a>
				
				
			</h2>
			
			<pre>type ChangeDetectionResults struct {
<span id="ChangeDetectionResults.Created"></span>    Created <a href="https://pkg.go.dev/builtin/#int">int</a>
<span id="ChangeDetectionResults.Altered"></span>    Altered <a href="https://pkg.go.dev/builtin/#int">int</a>
<span id="ChangeDetectionResults.Dropped"></span>    Dropped <a href="https://pkg.go.dev/builtin/#int">int</a>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="DetectConfigurationChanges">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L666">DetectConfigurationChanges</a>
					<a class="permalink" href="#DetectConfigurationChanges">&#xb6;</a>
					
					
				</h3>
				<pre>func DetectConfigurationChanges(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="#ChangeDetectionResults">ChangeDetectionResults</a></pre>
				
				
				
			
				
				<h3 id="DetectIndexChanges">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L502">DetectIndexChanges</a>
					<a class="permalink" href="#DetectIndexChanges">&#xb6;</a>
					
					
				</h3>
				<pre>func DetectIndexChanges(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="#ChangeDetectionResults">ChangeDetectionResults</a></pre>
				
				
				
			
				
				<h3 id="DetectPrivilegeChanges">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L584">DetectPrivilegeChanges</a>
					<a class="permalink" href="#DetectPrivilegeChanges">&#xb6;</a>
					
					
				</h3>
				<pre>func DetectPrivilegeChanges(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="#ChangeDetectionResults">ChangeDetectionResults</a></pre>
				
				
				
			
				
				<h3 id="DetectSprocChanges">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L334">DetectSprocChanges</a>
					<a class="permalink" href="#DetectSprocChanges">&#xb6;</a>
					
					
				</h3>
				<pre>func DetectSprocChanges(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="#ChangeDetectionResults">ChangeDetectionResults</a></pre>
				
				
				
			
				
				<h3 id="DetectTableChanges">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L418">DetectTableChanges</a>
					<a class="permalink" href="#DetectTableChanges">&#xb6;</a>
					
					
				</h3>
				<pre>func DetectTableChanges(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, vme <a href="#DBVersionMapEntry">DBVersionMapEntry</a>, storageCh chan&lt;- []<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#MeasurementMessage">MeasurementMessage</a>, hostState map[<a href="https://pkg.go.dev/builtin/#string">string</a>]map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#string">string</a>) <a href="#ChangeDetectionResults">ChangeDetectionResults</a></pre>
				
				
				
			

			
		
			
			
			<h2 id="DBVersionMapEntry">type <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/types.go.html#L44">DBVersionMapEntry</a>
				<a class="permalink" href="#DBVersionMapEntry">&#xb6;</a>
				
				
			</h2>
			
			<pre>type DBVersionMapEntry struct {
<span id="DBVersionMapEntry.LastCheckedOn"></span>    LastCheckedOn    <a href="https://pkg.go.dev/time/">time</a>.<a href="https://pkg.go.dev/time/#Time">Time</a>
<span id="DBVersionMapEntry.IsInRecovery"></span>    IsInRecovery     <a href="https://pkg.go.dev/builtin/#bool">bool</a>
<span id="DBVersionMapEntry.VersionStr"></span>    VersionStr       <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="DBVersionMapEntry.Version"></span>    Version          <a href="https://pkg.go.dev/builtin/#int">int</a>
<span id="DBVersionMapEntry.RealDbname"></span>    RealDbname       <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="DBVersionMapEntry.SystemIdentifier"></span>    SystemIdentifier <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="DBVersionMapEntry.IsSuperuser"></span>    IsSuperuser      <a href="https://pkg.go.dev/builtin/#bool">bool</a> <span class="comment">// if true and no helpers are installed, use superuser SQL version of metric if available</span>
<span id="DBVersionMapEntry.Extensions"></span>    Extensions       map[<a href="https://pkg.go.dev/builtin/#string">string</a>]<a href="https://pkg.go.dev/builtin/#int">int</a>
<span id="DBVersionMapEntry.ExecEnv"></span>    ExecEnv          <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="DBVersionMapEntry.ApproxDBSizeB"></span>    ApproxDBSizeB    <a href="https://pkg.go.dev/builtin/#int64">int64</a>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="DBGetPGVersion">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/database.go.html#L183">DBGetPGVersion</a>
					<a class="permalink" href="#DBGetPGVersion">&#xb6;</a>
					
					
				</h3>
				<pre>func DBGetPGVersion(ctx <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>, dbUnique <a href="https://pkg.go.dev/builtin/#string">string</a>, srcType <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#Kind">Kind</a>, noCache <a href="https://pkg.go.dev/builtin/#bool">bool</a>, SysID <a href="https://pkg.go.dev/builtin/#string">string</a>) (<a href="#DBVersionMapEntry">DBVersionMapEntry</a>, <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
				
				
				
			

			
		
			
			
			<h2 id="ExistingPartitionInfo">type <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/types.go.html#L57">ExistingPartitionInfo</a>
				<a class="permalink" href="#ExistingPartitionInfo">&#xb6;</a>
				
				
			</h2>
			
			<pre>type ExistingPartitionInfo struct {
<span id="ExistingPartitionInfo.StartTime"></span>    StartTime <a href="https://pkg.go.dev/time/">time</a>.<a href="https://pkg.go.dev/time/#Time">Time</a>
<span id="ExistingPartitionInfo.EndTime"></span>    EndTime   <a href="https://pkg.go.dev/time/">time</a>.<a href="https://pkg.go.dev/time/#Time">Time</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="MetricFetchMessage">type <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/types.go.html#L28">MetricFetchMessage</a>
				<a class="permalink" href="#MetricFetchMessage">&#xb6;</a>
				
				
			</h2>
			
			<pre>type MetricFetchMessage struct {
<span id="MetricFetchMessage.DBUniqueName"></span>    DBUniqueName        <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="MetricFetchMessage.DBUniqueNameOrig"></span>    DBUniqueNameOrig    <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="MetricFetchMessage.MetricName"></span>    MetricName          <a href="https://pkg.go.dev/builtin/#string">string</a>
<span id="MetricFetchMessage.Source"></span>    Source              <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#Kind">Kind</a>
<span id="MetricFetchMessage.Interval"></span>    Interval            <a href="https://pkg.go.dev/time/">time</a>.<a href="https://pkg.go.dev/time/#Duration">Duration</a>
<span id="MetricFetchMessage.CreatedOn"></span>    CreatedOn           <a href="https://pkg.go.dev/time/">time</a>.<a href="https://pkg.go.dev/time/#Time">Time</a>
<span id="MetricFetchMessage.StmtTimeoutOverride"></span>    StmtTimeoutOverride <a href="https://pkg.go.dev/builtin/#int64">int64</a>
}
</pre>

			

			

			
			
			

			

			
		
			
			
			<h2 id="Reaper">type <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L27">Reaper</a>
				<a class="permalink" href="#Reaper">&#xb6;</a>
				
				
			</h2>
			
			<pre>type Reaper struct {
    <span class="comment">// contains filtered or unexported fields</span>
}
</pre>

			

			

			
			
			

			
				
				<h3 id="NewReaper">func <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L34">NewReaper</a>
					<a class="permalink" href="#NewReaper">&#xb6;</a>
					
					
				</h3>
				<pre>func NewReaper(opts *<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/config/">config</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/config/#Options">Options</a>, sourcesReaderWriter <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/">sources</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/sources/#ReaderWriter">ReaderWriter</a>, metricsReaderWriter <a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/">metrics</a>.<a href="/docs/godoc/pkg/github.com/cybertec-postgresql/pgwatch3/metrics/#ReaderWriter">ReaderWriter</a>) *<a href="#Reaper">Reaper</a></pre>
				
				
				
			

			
				
				<h3 id="Reaper.Reap">func (*Reaper) <a href="/docs/godoc/src/github.com/cybertec-postgresql/pgwatch3/reaper/reaper.go.html#L42">Reap</a>
					<a class="permalink" href="#Reaper.Reap">&#xb6;</a>
					
					
				</h3>
				<pre>func (r *<a href="#Reaper">Reaper</a>) Reap(mainContext <a href="https://pkg.go.dev/context/">context</a>.<a href="https://pkg.go.dev/context/#Context">Context</a>) (err <a href="https://pkg.go.dev/builtin/#error">error</a>)</pre>
				
				
				
				
			
		
	

	







<div id="footer">
Build version go1.22.0.<br>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
