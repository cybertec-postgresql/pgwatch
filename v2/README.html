

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Introduction &mdash; pgwatch v2  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Project background" href="project_background.html" />
    <link rel="prev" title="Welcome to pgwatch2’s documentation!" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            pgwatch v2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#quick-start-with-docker">Quick start with Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typical-pull-architecture">Typical “pull” architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="#typical-push-architecture">Typical “push” architecture</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="project_background.html">Project background</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">List of main features</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced_features.html">Advanced features</a></li>
<li class="toctree-l1"><a class="reference internal" href="components.html">Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation_options.html">Installation options</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker_installation.html">Installing using Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_installation.html">Custom installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="preparing_databases.html">Preparing databases for monitoring</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_managed_services.html">Monitoring managed cloud databases</a></li>
<li class="toctree-l1"><a class="reference internal" href="metric_definitions.html">Metric definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="web_ui.html">The Admin Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboarding_alerting.html">Dashboarding and alerting</a></li>
<li class="toctree-l1"><a class="reference internal" href="sizing_recommendations.html">Sizing recommendations</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical_details.html">Technical details</a></li>
<li class="toctree-l1"><a class="reference internal" href="security.html">Security aspects</a></li>
<li class="toctree-l1"><a class="reference internal" href="long_term_installations.html">Long term installations</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrading.html">Upgrading</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pgwatch v2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Introduction</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>This documentation pertains to older v2.x releases. 
Many features and functions have since been updated or replaced. 
Please refer to the <a class="reference external" href="https://pgwat.ch/">current version</a> 
for the latest information.</p>
</div>
<section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Link to this heading"></a></h1>
<p>pgwatch2 is a flexible PostgreSQL-specific monitoring solution, relying on Grafana dashboards for the UI part. It supports monitoring
of almost all metrics for Postgres versions 9.0 to 13 out of the box and can be easily extended to include custom metrics.
At the core of the solution is the metrics gathering daemon written in Go, with many options to configure the details and
aggressiveness of monitoring, types of metrics storage and the display the metrics.</p>
<section id="quick-start-with-docker">
<h2>Quick start with Docker<a class="headerlink" href="#quick-start-with-docker" title="Link to this heading"></a></h2>
<p>For the fastest setup experience Docker images are provided via Docker Hub (if new to Docker start <a class="reference external" href="https://docs.docker.com/get-started/">here</a>).
For custom setups see the <a class="reference internal" href="custom_installation.html#custom-installation"><span class="std std-ref">Custom installations</span></a> paragraph below or turn to the pre-built DEB / RPM / Tar
packages on the Github Releases <a class="reference external" href="https://github.com/cybertec-postgresql/pgwatch2/releases">page</a>.</p>
<p>Launching the latest pgwatch2 Docker image with built-in InfluxDB metrics storage DB:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># run the latest Docker image, exposing Grafana on port 3000 and the administrative web UI on 8080</span>
<span class="n">docker</span> <span class="n">run</span> <span class="o">-</span><span class="n">d</span> <span class="o">-</span><span class="n">p</span> <span class="mi">3000</span><span class="p">:</span><span class="mi">3000</span> <span class="o">-</span><span class="n">p</span> <span class="mi">8080</span><span class="p">:</span><span class="mi">8080</span> <span class="o">-</span><span class="n">e</span> <span class="n">PW2_TESTDB</span><span class="o">=</span><span class="n">true</span> <span class="o">--</span><span class="n">name</span> <span class="n">pw2</span> <span class="n">cybertec</span><span class="o">/</span><span class="n">pgwatch2</span>
</pre></div>
</div>
<p>After some minutes you could for example open the <a class="reference external" href="http://127.0.0.1:3000/dashboard/db/db-overview">“DB overview”</a> dashboard and start
looking at metrics in Grafana. For defining your own dashboards or making changes you need to log in as admin (default
user/password: admin/pgwatch2admin).</p>
<p>NB! If you don’t want to add the “test” database (the pgwatch2 configuration DB holding connection strings to monitored DBs
and metric definitions) to monitoring, remove the PW2_TESTDB env variable.</p>
<p>Also note that for long term production usage with Docker it’s highly recommended to use separate <em>volumes</em> for each
pgwatch2 component - see <a class="reference internal" href="docker_installation.html#docker-example-launch"><span class="std std-ref">here</span></a> for a better launch example.</p>
</section>
<section id="typical-pull-architecture">
<span id="typical-architecture"></span><h2>Typical “pull” architecture<a class="headerlink" href="#typical-pull-architecture" title="Link to this heading"></a></h2>
<p>To get an idea how pgwatch2 is typically deployed a diagram of the standard Docker image fetching metrics from a set of
Postgres databases configured via a configuration DB:</p>
<a class="reference external image-reference" href="https://raw.githubusercontent.com/cybertec-postgresql/pgwatch2/master/screenshots/pgwatch2_architecture.png"><img alt="pgwatch2 typical deployment architecture diagram" src="https://raw.githubusercontent.com/cybertec-postgresql/pgwatch2/master/screenshots/pgwatch2_architecture.png" />
</a>
</section>
<section id="typical-push-architecture">
<h2>Typical “push” architecture<a class="headerlink" href="#typical-push-architecture" title="Link to this heading"></a></h2>
<p>A better fit for very dynamic (Cloud) environments might be a more de-centralized “push” approach or just exposing the metrics
over a port for remote scraping. In that case the only component required would be the pgwatch2 metrics collection daemon.</p>
<a class="reference external image-reference" href="https://raw.githubusercontent.com/cybertec-postgresql/pgwatch2/master/screenshots/pgwatch2_architecture_push.png"><img alt="pgwatch2 &quot;push&quot; deployment architecture diagram" src="https://raw.githubusercontent.com/cybertec-postgresql/pgwatch2/master/screenshots/pgwatch2_architecture_push.png" />
</a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Welcome to pgwatch2’s documentation!" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="project_background.html" class="btn btn-neutral float-right" title="Project background" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, CYBERTEC PostgreSQL International GmBh.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>